---
import SocialList from "@/components/SocialList.astro";
import PostPreview from "@/components/blog/PostPreview.astro";
import PageLayout from "@/layouts/Base.astro";
import { twMerge } from "tailwind-merge";
import { getAllPosts, sortMDByDate } from "@/utils";

const MAX_POSTS = 10;
const allPosts = await getAllPosts();
const allPostsByDate = sortMDByDate(allPosts).slice(0, MAX_POSTS);

type TechList_T = {
    icon: string;
    desc: string;
    href?: string;
};

const cactusTech: TechList_T[] = [
    {
        icon: "devicon-embeddedc-plain",
        desc: "Embedded C Programming",
    },
    {
        icon: "devicon-splunk-original-wordmark text-4xl",
        desc: "Data Platform",
    },
    {
        icon: "devicon-python-plain",
        desc: "Python",
    },
    {
        icon: "devicon-typescript-plain",
        desc: "TypeScript",
    },
    {
        icon: "devicon-react-original",
        desc: "React",
    },
    {
        icon: "devicon-javascript-plain",
        desc: "JavaScript",
    },
    {
        icon: "devicon-rust-original",
        desc: "Rust Programming Language",
    },
    {
        icon: "devicon-bash-plain",
        desc: "Bash Language",
    },
    {
        icon: "devicon-postgresql-plain",
        desc: "PostgreSQL",
    },
];
---

<PageLayout meta={{ title: "Home" }}>
    <section>
        <h1 class="title mb-6">Hello, I'm Ryan</h1>
        <p class="mb-4">
            A full-stack developer based in Essex, England. I've previously worked as an embedded software engineer with
            Sky, developing and maintaining broadband devices across the United Kingdom, and Republic of Ireland. I'm currently working with <a
                href="https://and-element.com/"
                class="underline underline-offset-4 dark:decoration-slate-300 decoration-gray-800"
                target="_blank">&Element</a
            > and <a
                href="https://merlincloud.ai/"
                class="underline underline-offset-4 dark:decoration-slate-300 decoration-gray-800"
                target="_blank">Merlin Cloud</a
            > to help build new and exciting interactive retail experiences.
        </p>
        <p class="mb-4">
            I'm normally building something in my free time, take a look at my <a
                href="/projects"
                class="underline underline-offset-4 dark:decoration-slate-300 decoration-gray-800"
                target="_blank">projects</a
            > page for more. Away from the screen, I'm a somewhat competent snowboarder, and dog owner üèÇ üê∂
        </p>
        <SocialList />
    </section>
    <section class="mt-16">
        <h2 class="title mb-4 text-xl">Technologies</h2>
        <p class="mb-4">
            Here's a few of the languages and technologies I have professional experience working with. I mostly work
            within the JavaScript/TypeScript ecosystem now, but I also use Rust, Python, and other assorted
            technologies.
        </p>
        <dl class="flex items-center gap-x-3 max-w-52 sm:max-w-full flex-wrap">
            {
                cactusTech.map(({ desc, icon }) => (
                    <dt>
                        <span class="flex">
                            <i aria-label={desc} class={twMerge(["text-2xl", icon])} />
                        </span>
                    </dt>
                ))
            }
        </dl>
    </section>
    <section aria-label="Blog post list" class="mt-16">
        <h2 class="title mb-4 text-xl">Posts</h2>
        <ul class="space-y-4">
            <li class="flex flex-col gap-x-2 sm:flex-row">
                <p>I haven't created any posts yet, check back later.</p>
            </li>
        </ul>
        <!-- <ul class="space-y-4">
            {
                allPostsByDate.map((p) => (
                    <li class="flex flex-col gap-x-2 sm:flex-row">
                        <PostPreview post={p} />
                    </li>
                ))
            }
        </ul> -->
    </section>
</PageLayout>
